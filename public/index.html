<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ebegrace Zion Academy ‚Äî Home of the Intelligence</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body>

    <!-- HEADER -->
    <header>
        <div class="logo">
            <img src="images/logo.png" alt="Ebegrace Zion Academy Logo">
            <h1>EBEGRACE ZION ACADEMY</h1>
        </div>
        <nav>
            <ul>

                <li><a href="public/index.html">HOME</a></li>
                <li><a href="#academics">OUR ACADEMICS</a></li>
                <li><a href="admissions.html">ADMISSIONS</a></li>
                <li><a href="#contact">CONTACT</a></li>
                <li><a href="student-portal.html" class="btn-portal">SCHOOL PORTAL</a></li>
                <a href="forgot-password.html"><i class="fas fa-key"></i> Forgot Password?</a>
            </ul>
        </nav>
    </header>

    <!-- HERO SECTION -->
    <section id="home" class="hero">
        <div class="hero-text">
            <h2>Explore Ebegrace Zion Academy</h2>
            <p><strong>Motto:</strong> Knowledge and Determination</p>
            <p><strong>Slogan:</strong> Home of the Intelligence</p>
            <p>Where every child is nurtured to become a confident, intelligent, and godly learner.</p>
            <a href="admissions.html" class="btn-primary">Apply Now</a>
        </div>
    </section>

    <!-- NAGIE'S ANGELS-STYLE NOTICE BAR -->
    <section class="notices-bar">
        <div class="notices-container" id="topNotices">
            <!-- Dynamically populated -->
        </div>
    </section>

    <!-- NAGIE'S ANGELS ICON BAR (DIRECT COPY) -->
    <section class="icon-bar">
        <div class="icon-container">
            <div class="icon-item"><i class="fas fa-spell-check"></i> Spelling</div>
            <div class="icon-item"><i class="fas fa-brain"></i> Intelligence</div>
            <div class="icon-item"><i class="fas fa-pen"></i> Write</div>
            <div class="icon-item"><i class="fas fa-calendar"></i> Events</div>
            <div class="icon-item"><i class="fas fa-flag"></i> Nationalism</div>
            <div class="icon-item"><i class="fas fa-smile"></i> Attitude</div>
            <div class="icon-item"><i class="fas fa-pray"></i> Godliness</div>
            <div class="icon-item"><i class="fas fa-gem"></i> Integrity</div>
            <div class="icon-item"><i class="fas fa-award"></i> Excellence</div>
            <div class="icon-item"><i class="fas fa-hands-helping"></i> Service</div>
            <div class="icon-item"><i class="fas fa-newspaper"></i> News</div>
        </div>
    </section>

    <!-- OUR ACADEMICS SECTION (Pre-School, Primary, JHS) -->
    <section id="academics" class="academics-section">
        <div class="container">
            <h2 class="section-title">Our Academics</h2>
            <div class="programs-grid">
                <div class="program-card">
                    <h3>Pre-School</h3>
                    <p>For children aged 1‚Äì5. Foundational learning through play, worship, and discovery.</p>
                    <a href="admissions.html">Learn More ‚Üí</a>
                </div>
                <div class="program-card">
                    <h3>Primary</h3>
                    <p>Building strong academics, character, and biblical values for ages 6‚Äì11.</p>
                    <a href="admissions.html">Learn More ‚Üí</a>
                </div>
                <div class="program-card">
                    <h3>JHS</h3>
                    <p>Preparing confident, Christ-led leaders for BECE and beyond. Ages 12‚Äì15.</p>
                    <a href="admissions.html">Learn More ‚Üí</a>
                </div>
            </div>
        </div>
    </section>

    <!-- CATEGORY TABS + NOTICES GRID -->
    <section class="notices-section">
        <div class="container">
            <h2 class="section-title">School Notices</h2>
            <div style="text-align: center; margin: 20px 0;">
                <button id="printAllNotices" class="btn-primary">üñ®Ô∏è Download All Notices as PDF</button>
                <button id="printCurrentCategory" class="btn-secondary">üìÑ Download Current Category</button>
            </div>
            <div class="tabs">
                <button class="tab-btn active" data-category="All">All</button>
                <button class="tab-btn" data-category="Events">üìÖ Events</button>
                <button class="tab-btn" data-category="Academics">üìö Academics</button>
                <button class="tab-btn" data-category="Urgent">‚ö†Ô∏è Urgent</button>
                <button class="tab-btn" data-category="News">üì∞ News</button>
                <button class="tab-btn" data-category="Nationalism">üá¨üá≠ Nationalism</button>
                <button class="tab-btn" data-category="Godliness">üôè Godliness</button>
                <button class="tab-btn" data-category="Integrity">üíé Integrity</button>
                <button class="tab-btn" data-category="Excellence">üèÜ Excellence</button>
                <button class="tab-btn" data-category="Service">ü§ù Service</button>
                <button class="tab-btn" data-category="Attitude">üòä Attitude</button>
            </div>

            <div id="noticesGrid" class="notices-grid">
                <!-- Dynamically populated -->
            </div>
        </div>
    </section>

    <!-- ABOUT US -->
    <section id="about" class="about">
        <div class="container">
            <p>
                Ebegrace Zion Academy is home to over 1000 learners from ages 1 to 14 and more than 600 past students,
                who are characterized by their positive attitude towards life, godliness, intelligence, and diligence.
            </p>
            <p>
                With over 30 years of experience in providing quality teaching and child-centered learning practices for
                our learners, affectionately called ‚ÄúZion Stars‚Äù, our school has given many children the opportunity to
                explore various study scopes, discover modern technologies in education, unearth hidden talents, and
                connect with other children across Ghana and parts of West Africa.
            </p>
            <div class="principal-signature">
                <img src="images/logo.png" alt="Principal's Signature"
                    style="width: 80px; height: auto; margin-bottom: 10px;">
                <p><strong>Mrs. Grace Antwi</strong><br>Principal</p>
            </div>
        </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="contact">
        <div class="container">
            <h2>Contact Us</h2>
            <p><strong>Phone:</strong> <a href="tel:0546792255">0546 792 255</a></p>
            <p><strong>Email:</strong> <a href="mailto:ebegracezion@gmail.com">Ebegracezion@gmail.com</a></p>
            <p><strong>Location:</strong>Osei Tutu First Avenue, 10, Kumasi Metropolitan District, Ashanti</p>
            <div class="social-links">
               <a href="https://www.facebook.com/EBEGRATVADUMKUMASI" target="_blank" rel="noopener noreferrer">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="#" target="_blank" rel="noopener noreferrer">
            <i class="fab fa-instagram"></i>
          </a>
          <a href="https://wa.me/233546792255" target="_blank" rel="noopener noreferrer">
            <i class="fab fa-whatsapp"></i> 
          </a>
            </div>
        </div>
    </section>
    <main>

        <!-- MAIN CONTENT -->
        <main class="container" style="padding: 60px 20px;">

            <h2 style="text-align: center; color: #8B00FF; margin-bottom: 40px;">
                How We Share School Updates with Parents
            </h2>

            <!-- FACEBOOK VIDEO EMBED ‚Äî FIXED VERSION -->
            <div
                style="max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);">

                <!-- ‚úÖ FIXED: Load Facebook SDK with crossorigin -->
                <div id="fb-root"></div>
                <script async defer crossorigin="anonymous"
                    src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v18.0">
                    </script>

                <!-- ‚úÖ FIXED: No extra spaces in data-href -->
                <div class="fb-video" data-href="https://www.facebook.com/facebook/videos/10153231379946729/"
                    data-width="560" data-show-text="true" data-allowfullscreen="true">
                    <blockquote cite="https://www.facebook.com/facebook/videos/10153231379946729/"
                        class="fb-xfbml-parse-ignore">
                        <a href="https://www.facebook.com/facebook/videos/10153231379946729/">How to Share With Just
                            Friends</a>
                        <p>How to share with just friends.</p>
                        Posted by <a href="https://www.facebook.com/facebook/">Facebook</a> on Friday, December 5, 2014
                    </blockquote>
                </div>

                <p style="margin-top: 30px; text-align: center; font-style: italic; color: #666;">
                    <strong>Note:</strong> This video demonstrates how to share updates privately ‚Äî just like we do with
                    parents at Ebegrace Zion Academy.
                </p>
            </div>
        </main>

        <!-- FOOTER -->
        <footer>
            <div class="footer-content">
                <div class="school-info">
                    <h4>Ebegrace Zion Academy</h4>
                    <p>Motto: Knowledge and Determination</p>
                    <p>Slogan: Home of the Intelligence</p>
                </div>
                <div class="quick-links">
                    <h5>Quick Links</h5>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="#academics">Our Academics</a></li>
                        <li><a href="admissions.html">Admissions</a></li>
                        <li><a href="student-portal.html">School Portal</a></li>
                        <li><a href="careers.html">Careers</a></li>
                        <li><a href="#contact">Contact</a></li>
                        <li><a href="developers.html">Developers</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 Ebegrace Zion Academy. All Rights Reserved.</p>
            </div>
        </footer>

        <script src="script.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', async () => {
                // Load notices
                let notices = JSON.parse(localStorage.getItem('schoolNotices') || '[]');
                if (notices.length === 0) {
                    try {
                        const response = await fetch('data/notices.json');
                        notices = await response.json();
                        localStorage.setItem('schoolNotices', JSON.stringify(notices));
                    } catch (e) {
                        notices = [];
                    }
                }

                // Display top scrolling bar
                const topNotices = notices.slice(0, 4);
                const topContainer = document.getElementById('topNotices');
                topContainer.innerHTML = '';

                const categoryEmojis = {
                    Urgent: '‚ö†Ô∏è', Events: 'üìÖ', Academics: 'üìö', Godliness: 'üôè',
                    Nationalism: 'üá¨üá≠', News: 'üì∞', Integrity: 'üíé', Excellence: 'üèÜ',
                    Service: 'ü§ù', Attitude: 'üòä'
                };

                topNotices.forEach(notice => {
                    const div = document.createElement('div');
                    div.className = `notice-item ${notice.category.toLowerCase()}`;
                    div.innerHTML = `<span>${categoryEmojis[notice.category] || ''} ${notice.category}:</span> ${notice.title}`;
                    topContainer.appendChild(div);
                });

                // Display grid
                displayNotices(notices, 'All');

                // Tab filtering
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        const category = btn.getAttribute('data-category');
                        displayNotices(notices, category);
                    });
                });

                // PDF handlers
                document.getElementById('printAllNotices')?.addEventListener('click', () => generatePDF('All'));
                document.getElementById('printCurrentCategory')?.addEventListener('click', () => {
                    const activeCategory = document.querySelector('.tab-btn.active').getAttribute('data-category');
                    generatePDF(activeCategory);
                });
            });

            function displayNotices(notices, category) {
                const now = new Date();
                const container = document.getElementById('noticesGrid');
                container.innerHTML = '';

                const filtered = notices.filter(notice => {
                    if (notice.expiry && new Date(notice.expiry) < now) return false;
                    if (category !== 'All' && notice.category !== category) return false;
                    return true;
                });

                if (filtered.length === 0) {
                    container.innerHTML = '<p>No notices in this category.</p>';
                    return;
                }

                filtered.forEach(notice => {
                    const card = document.createElement('div');
                    card.className = 'notice-card';
                    const date = new Date(notice.date).toLocaleDateString();
                    let html = `
          <h4>${notice.title}</h4>
          <p>${notice.message}</p>
        `;
                    if (notice.image) {
                        html += `<img src="${notice.image}" alt="Notice Image" style="width:100%; border-radius:8px; margin:15px 0;">`;
                    }
                    html += `
          <div class="notice-meta">
            <span>${notice.category}</span>
            <span>${date}</span>
          </div>
        `;
                    card.innerHTML = html;
                    container.appendChild(card);
                });
            }

            async function generatePDF(category) {
                const { jsPDF } = window.jspdf;
                let notices = JSON.parse(localStorage.getItem('schoolNotices') || '[]');
                const now = new Date();
                const filtered = notices.filter(n => {
                    if (n.expiry && new Date(n.expiry) < now) return false;
                    return category === 'All' || n.category === category;
                });

                const doc = new jsPDF();
                doc.setFontSize(20);
                doc.text(`Ebegrace Zion Academy ‚Äî ${category} Notices`, 14, 20);
                doc.setFontSize(10);
                doc.text(`Generated on: ${new Date().toLocaleString()}`, 14, 30);

                let y = 50;

                filtered.forEach(notice => {
                    if (y > 250) {
                        doc.addPage();
                        y = 20;
                    }

                    doc.setFontSize(14);
                    doc.setFont("helvetica", "bold");
                    doc.text(`${notice.title} [${notice.category}]`, 14, y);
                    y += 8;

                    doc.setFontSize(10);
                    doc.setFont("helvetica", "normal");
                    doc.text(`Posted: ${new Date(notice.date).toLocaleDateString()} | By: ${notice.postedBy}`, 14, y);
                    y += 6;

                    const lines = doc.splitTextToSize(notice.message, 180);
                    doc.text(lines, 14, y);
                    y += lines.length * 6 + 10;
                });

                doc.save(`EbegraceZion_${category}_Notices_${new Date().toISOString().slice(0, 10)}.pdf`);
            }
        </script>
</body>

</html>